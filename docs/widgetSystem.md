# ุณุณุชู ูุฏุฑุช ูุฌุชโูุง (Widget System)

ุณุณุชู ูุฏุฑุช ูุฌุชโูุง ฺฉ ูุงุจูุช ูุฑฺฉุฒ ู ูุฏุฑุชููุฏ ุฏุฑ ุดุฑุงุฒู ุงุณุช ฺฉู ุจู ุดูุง ุงุฌุงุฒู ูโุฏูุฏ ฺุฏูุงู ู ูููุนุช ฺฉุงููพูููุชโูุง ฺฉูฺฺฉ UI (ฺฉู ยซูุฌุชยป ูุงูุฏู ูโุดููุฏ) ุฑุง ุจู ุตูุฑุช ูุชูุฑฺฉุฒ ู ุงุฒ ุทุฑู ูุงู `config.js` ูุฏุฑุช ฺฉูุฏ. ุงู ุณุณุชู ุจุฑุง ุญู ูุดฺฉูุงุช ูุงููุฏ ูููพูุดุงู ุนูุงุตุฑุ ฺฉูุชุฑู ุฑูุชุงุฑ ุฏุฑ ุฏุณุชฺฏุงูโูุง ูุฎุชูู ู ุงุฑุงุฆู ฺฉ ุชุฌุฑุจู ฺฉุงุฑุจุฑ ฺฉูพุงุฑฺู ุทุฑุงุญ ุดุฏู ุงุณุช.

## ููุงูู ฺฉูุฏ

-   **ูุฌุช (Widget):** ฺฉ ุนูุตุฑ ฺฉูฺฺฉ ู ูุณุชูู ุฏุฑ ุฑุงุจุท ฺฉุงุฑุจุฑุ ูุงููุฏ ุฏฺฉูู ุชุบุฑ ุชูุ ููฺฉ ฺฏุชโูุงุจุ ุฏฺฉูู ุฌุณุชุฌู ุง ูุฑ ฺฉุงููพูููุช ุฏฺฏุฑ ฺฉู ุชูุณุท ฺฉ ุงูุฒููู ุงุถุงูู ูโุดูุฏ.
-   **ุงุณูุงุช (Slot):** ฺฉ ุฌุงฺฏุงู ุงุฒ ูพุด ุชุนุฑูโุดุฏู ุฏุฑ ฺุฏูุงู ุตูุญู ฺฉู ูุฌุชโูุง ูโุชูุงููุฏ ุฏุฑ ุขู ูุฑุงุฑ ุจฺฏุฑูุฏ. ุงุณูุงุชโูุง ูโุชูุงููุฏ ุฏุฑ ููุงุฑ ฺฉูุงุฑุ ููุงุฑ ูุงูุจุฑ ุง ุจู ุตูุฑุช ุดูุงูุฑ ุฏุฑ ฺฏูุดูโูุง ุตูุญู ุจุงุดูุฏ.

## ฺุฑุง ุงุฒ ุงู ุณุณุชู ุงุณุชูุงุฏู ฺฉููุ

-   **ฺฉูุชุฑู ูุชูุฑฺฉุฒ:** ุจู ุฌุง ุงูฺฉู ูุฑ ุงูุฒููู ูููุนุช ุนูุตุฑ ุฎูุฏ ุฑุง ุจู ุตูุฑุช ุฌุฏุงฺฏุงูู ุชุนู ฺฉูุฏุ ุดูุง ูโุชูุงูุฏ ฺุฏูุงู ฺฉู ุฑุง ุงุฒ ฺฉ ูฺฉุงู ูุงุญุฏ ูุฏุฑุช ฺฉูุฏ.
-   **ุฌููฺฏุฑ ุงุฒ ูููพูุดุงู:** ุณุณุชู ุจู ุตูุฑุช ููุดููุฏ ุงุฒ ุชุฏุงุฎู ูุฌุชโูุง ุจุง ฺฉุฏฺฏุฑ ู ุจุง ุณุงุฑ ุงุฌุฒุง ุงุตู ูุงููุฏ ููุงุฑ ูุงูุจุฑ ุง ุณุงุฏุจุงุฑ ุฌููฺฏุฑ ูโฺฉูุฏ.
-   **ูุงฺฉูุดโฺฏุฑุง ูพุดุฑูุชู:** ุดูุง ูโุชูุงูุฏ ุจุฑุง ูุฑ ูุฌุชุ ฺฉ ุฑูุชุงุฑ ูุดุฎุต ุฏุฑ ุญุงูุช ููุจุงู ุชุนุฑู ฺฉูุฏ (ูุซูุงู ุขู ุฑุง ูุฎู ฺฉูุฏ ุง ุจู ููู ููุจุฑฺฏุฑ ููุชูู ฺฉูุฏ).
-   **ุณุงุฒฺฏุงุฑ ุจุง ุงูุฒูููโูุง:** ุงูุฒูููโูุง ฺฉู ุจุง ุงู ุณุณุชู ฺฉูพุงุฑฺู ุดุฏูโุงูุฏุ ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ุงุฒ ุงู ูุงุจูุชโูุง ุจูุฑูโููุฏ ูโุดููุฏ.

## ูพฺฉุฑุจูุฏ ุฏุฑ `config.js`

ุชูุงู ุชูุธูุงุช ุงู ุณุณุชู ุงุฒ ุทุฑู ุขุจุฌฺฉุช `widgets` ุฏุฑ ูุงู `config.js` ุงูุฌุงู ูโุดูุฏ.

```javascript
// in config.js
window.shirazeh = {
  // ...
  widgets: {
    enabled: true,
    slots: {
      // 'widget-id': { desktop: 'slot-name', mobile: 'policy', priority: number }
      'theme-toggle': { desktop: 'navbar-right', mobile: 'menu', priority: 90 },
      'github-corner': { desktop: 'dock-top-left', mobile: 'hide', priority: 80 },
    },
  },
  // ...
};
```

### ฺฏุฒููโูุง ุงุตู

-   `enabled`: (`boolean`, ูพุดโูุฑุถ: `true`)
    -   ูุนุงู ุง ุบุฑูุนุงู ฺฉุฑุฏู ฺฉุงูู ุณุณุชู ูุฌุช. ุงฺฏุฑ `false` ุจุงุดุฏุ ุงูุฒูููโูุง ุจู ุฑูุชุงุฑ ูพุดโูุฑุถ ุฎูุฏ ุจุฑุง ูููุนุชโุงุจ (ุฏุฑ ุตูุฑุช ูุฌูุฏ) ุจุงุฒูโฺฏุฑุฏูุฏ.

-   `slots`: (`object`)
    -   ฺฉ ุขุจุฌฺฉุช ฺฉู ููุงูู ูุฑุงุฑฺฏุฑ ูุฑ ูุฌุช ุฑุง ูุดุฎุต ูโฺฉูุฏ.
    -   **ฺฉูุฏ (Key):** `id` ููุญุตุฑ ุจู ูุฑุฏ ูุฌุช (ูุซูุงู `'theme-toggle'`). ุงู `id` ุชูุณุท ุฎูุฏ ุงูุฒููู ุชุนุฑู ูโุดูุฏ.
    -   **ููุฏุงุฑ (Value):** ฺฉ ุขุจุฌฺฉุช ุจุง ุณู ุฎุงุตุช:
        -   `desktop`: (`string`) ูุงู ุงุณูุงุช ฺฉู ูุฌุช ุจุงุฏ ุฏุฑ ุญุงูุช ุฏุณฺฉุชุงูพ ุฏุฑ ุขู ูุฑุงุฑ ฺฏุฑุฏ.
        -   `mobile`: (`string`) ุณุงุณุช ฺฉู ุฑูุชุงุฑ ูุฌุช ุฑุง ุฏุฑ ุญุงูุช ููุจุงู ูุดุฎุต ูโฺฉูุฏ.
        -   `priority`: (`number`, ุงุฎุชุงุฑ) ฺฉ ุนุฏุฏ ุจุฑุง ุงูููุชโุจูุฏ ูุฌุชโูุง ุฏุฑ ฺฉ ุงุณูุงุช. ุนุฏุฏ ุจุฒุฑฺฏุชุฑ ุจู ูุนูุง ุงูููุช ุจุงูุงุชุฑ ุงุณุช (ุนู ุจุงูุงุชุฑ ุง ุฌููุชุฑ ููุงุด ุฏุงุฏู ูโุดูุฏ).

## ูุณุช ุงุณูุงุชโูุง ุฏุณฺฉุชุงูพ (`desktop`)

ุดูุง ูโุชูุงูุฏ ูุฌุชโูุง ุฑุง ุฏุฑ ฺฉ ุงุฒ ุงุณูุงุชโูุง ุฒุฑ ูุฑุงุฑ ุฏูุฏ:

| ูุงู ุงุณูุงุช                  | ุชูุถุญุงุช                                                              |
| -------------------------- | -------------------------------------------------------------------- |
| `sidebar-header-actions`   | ุฒุฑ ูุฏุฑ ุณุงุฏุจุงุฑ (ููฺฏู ู ูุงู) ู ุจุงูุง ุขุชูโูุง ููู.                  |
| `sidebar-footer-actions`   | ุฏุฑ ูพุงูโุชุฑู ุจุฎุด ุณุงุฏุจุงุฑุ ุฒุฑ ุชูุงู ุขุชูโูุง ููู.                    |
| `navbar-left`              | ุฏุฑ ุจุฎุด ฺูพ ููุงุฑ ูุงูุจุฑ (ุณูุช ุฑุงุณุช ุฏุฑ ุญุงูุช RTL).                      |
| `navbar-center`            | ุฏุฑ ุจุฎุด ูุฑฺฉุฒ ููุงุฑ ูุงูุจุฑ (ุงู ุงุณูุงุช ุฏุฑ ุญุงู ุญุงุถุฑ ุบุฑูุนุงู ุงุณุช).        |
| `navbar-right`             | ุฏุฑ ุจุฎุด ุฑุงุณุช ููุงุฑ ูุงูุจุฑ (ุณูุช ฺูพ ุฏุฑ ุญุงูุช RTL).                       |
| `dock-top-left`            | ุจู ุตูุฑุช ุดูุงูุฑ ุฏุฑ ฺฏูุดู ุจุงูุง-ฺูพ ุตูุญู.                                  |
| `dock-top-right`           | ุจู ุตูุฑุช ุดูุงูุฑ ุฏุฑ ฺฏูุดู ุจุงูุง-ุฑุงุณุช ุตูุญู.                                 |
| `dock-bottom-left`         | ุจู ุตูุฑุช ุดูุงูุฑ ุฏุฑ ฺฏูุดู ูพุงู-ฺูพ ุตูุญู.                                 |
| `dock-bottom-right`        | ุจู ุตูุฑุช ุดูุงูุฑ ุฏุฑ ฺฏูุดู ูพุงู-ุฑุงุณุช ุตูุญู.                                |
| `fallback-right-stack`     | (ูพุดโูุฑุถ) ฺฉ ุณุชูู ุนููุฏ ุฏุฑ ุณูุช ุฑุงุณุช-ุจุงูุง ุตูุญู.                  |

## ุณุงุณุชโูุง ููุจุงู (`mobile`)

ุดูุง ูโุชูุงูุฏ ุฑูุชุงุฑ ูุฑ ูุฌุช ุฑุง ุฏุฑ ุญุงูุช ููุจุงู (ุตูุญุงุช ุจุง ุนุฑุถ ฺฉู) ุจุง ฺฉ ุงุฒ ุณุงุณุชโูุง ุฒุฑ ุชุนู ฺฉูุฏ:

| ุณุงุณุช   | ุชูุถุญุงุช                                                                                              |
| -------- | ---------------------------------------------------------------------------------------------------- |
| `show`   | ูุฌุช ุฏุฑ ููุงู ุงุณูุงุช ุฏุณฺฉุชุงูพ ุฎูุฏ ุจุงู ูโูุงูุฏ ู ุฏุฑ ููุจุงู ูุฒ ููุงุด ุฏุงุฏู ูโุดูุฏ.                         |
| `hide`   | ูุฌุช ุฏุฑ ุญุงูุช ููุจุงู ุจู ุทูุฑ ฺฉุงูู ูุฎู ูโุดูุฏ.                                                        |
| `menu`   | ูุฌุช ุจู ููู ููุจุฑฺฏุฑ ููุจุงู (ุฏุฑ ุตูุฑุช ูุนุงู ุจูุฏู ุงูุฒููู Navbar) ููุชูู ูโุดูุฏ. ุงู ุจูุชุฑู ฺฏุฒูู ุจุฑุง ุญูุธ ูุถุง ุตูุญู ุงุณุช. |
| `dock`   | ูุฌุช ุฑุง ูุฌุจูุฑ ูโฺฉูุฏ ุชุง ุฏุฑ ูููุนุช ุดูุงูุฑ ุฎูุฏ (dock) ุจุงู ุจูุงูุฏุ ุญุช ุฏุฑ ููุจุงู.                          |

## ุฑุงูููุง ุจุฑุง ุชูุณุนูโุฏููุฏฺฏุงู ุงูุฒููู

ุงฺฏุฑ ุฏุฑ ุญุงู ุชูุณุนู ุงูุฒูููโุง ูุณุชุฏ ฺฉู ฺฉ ุนูุตุฑ UI ุจู ุตูุญู ุงุถุงูู ูโฺฉูุฏุ ููุงู ุชูุตู ูโุดูุฏ ุขู ุฑุง ุจุง ุณุณุชู ูุฌุช ฺฉูพุงุฑฺู ฺฉูุฏ.

-   **ุฑูุด ฺฉุงุฑ:**
    1.  ุฏุฑ ูุชุฏ `onInit` ุงูุฒููู ุฎูุฏุ ุนูุตุฑ DOM ููุฑุฏ ูุธุฑ ุฑุง ุจุณุงุฒุฏ (ูุซูุงู ฺฉ `button` ุง `a`).
    2.  ุจุฑุฑุณ ฺฉูุฏ ฺฉู ุขุง ุณุณุชู ูุฌุช ูุนุงู ุงุณุช (`app.config.widgets.enabled`).
    3.  ุงฺฏุฑ ูุนุงู ุจูุฏุ ูุชุฏ `app.widgetManager.register()` ุฑุง ูุฑุงุฎูุงู ฺฉุฑุฏู ู ฺฉ ุขุจุฌฺฉุช ุดุงูู `id` ู `element` ุฑุง ุจู ุขู ูพุงุณ ุฏูุฏ.
    4.  ุจู ุนููุงู ฺฉ **Fallback**ุ ุงฺฏุฑ ุณุณุชู ูุฌุช ุบุฑูุนุงู ุจูุฏุ ููุทู ูุฏู ุฎูุฏ ุฑุง ุจุฑุง ุงูุฒูุฏู ุนูุตุฑ ุจู DOM ู ูููุนุชโุฏู ุขู ุจุง CSS ุงุฌุฑุง ฺฉูุฏ.

-   **ูุซุงู:**
    ```javascript
    // in your plugin's onInit(app) method
    onInit(app) {
      // 1. Create your element
      const myWidgetElement = document.createElement('div');
      myWidgetElement.id = 'my-cool-widget';
      myWidgetElement.textContent = '๐';

      // 2. Check if the widget system is enabled
      if (app.config.widgets && app.config.widgets.enabled) {
        // 3. Register your widget
        app.widgetManager.register({
          id: 'my-cool-widget', // Must match a key in config.js widgets.slots
          element: myWidgetElement,
        });
      } else {
        // 4. Fallback for when the system is disabled
        myWidgetElement.style.position = 'fixed';
        myWidgetElement.style.bottom = '20px';
        myWidgetElement.style.right = '20px';
        document.body.appendChild(myWidgetElement);
      }
    }
    ```
-   **ูฺฉุชู ููู:** ุญุชูุงู ฺฉ ูุฑูุฏ ูพุดโูุฑุถ ุจุฑุง ูุฌุช ุฎูุฏ ุฏุฑ `src/core/configManager.js` ุงุถุงูู ฺฉูุฏ ุชุง ฺฉุงุฑุจุฑุงู ุจู ุฑุงุญุช ุจุชูุงููุฏ ุขู ุฑุง ฺฉุดู ู ุงุณุชูุงุฏู ฺฉููุฏ.