پرامپت‌های داده شده به مدل هوش برای پیاده‌سازی پروژه در این پرونده ثبت می‌شود.

## پرامپت ۱
بسیار خب، بیا اولین قدم پروژه PWiki رو برداریم. من نمی‌خوام کل ویکی رو یکجا بسازیم. می‌خوام با یک چیز خیلی ساده و کاربردی شروع کنیم.

**ویژگی اول:**
می‌خوام یک فایل `index.html` داشته باشم. وقتی این فایل رو توی مرورگر باز می‌کنم، باید به طور خودکار محتوای یک فایل به اسم `README.md` که کنارش هست رو بخونه و به صورت یک صفحه وب زیبا نمایش بده.

**نکات مهم برای این ویژگی:**
-   **بدون سرور:** باید مستقیماً با باز کردن فایل `index.html` کار کنه.
-   **راست‌چین:** چون برای فارسی هست، متن باید به صورت پیش‌فرض راست‌چین و خوانا باشه.
-   **ساده:** فعلاً به منوی کناری، لینک‌های دیگه، یا چیزهای پیچیده فکر نکن. فقط همین: باز کردن `index.html` و دیدن محتوای `README.md`.

یادت باشه که باید تمام قوانینی که در دستورالعمل اصلی بهت دادم رو رعایت کنی (جاوااسکریپت خالص، کد تمیز، ساختار فایل مشخص و غیره). من به عنوان مدیر محصول، منتظر دیدن این ویژگی ساده هستم تا بتونیم اولین نسخه رو تست کنیم.

## پرامپت ۲
ازت می‌خوام از هیچ فریم‌ورکی استفاده نکنی و پروژه را با جاوااسکریپت خام پیاده‌سازی کنی. فایل‌ها با پسوند tsx را از پروژه حذف کن.

## پرامپت ۳
ازت می‌خوام کارهای زیر را انجام بدی:
1. پروژه باید به صورت ماژولار پیاده‌سازی بشه (پوشه‌ای با نام src بساز)
2. کدهای css را از فایل HTML خارج کن و در پوشه styles قرار بده
3. از tailwind در پروژه استفاده نکن. فقط از css خام استفاده کن.
4. یادت باشه که کامنت‌های JSDoc باید به **زبان انگلیسی** باشن.
5. یک استایل ساده و تمیز برای نمایش متن مارک‌دان بنویس (مشابه خروجی قبلی ولی بدون Tailwind).
6. حتماً فونت وزیرمتن رو به صورت محلی تعریف کن (فعلاً مسیرش رو خالی بذار، بعداً اضافه می‌کنیم).
7. تمام استایل‌ها باید راست‌چین (RTL) باشن.

## پرامپت ۴
لطفاً کدهای جاوااسکریپتی که نوشتی رو **بازسازی (Refactor)** کن.

**انتظارات من از این بازسازی:**
-   **ماژولار کن:** کدها رو به بخش‌های کوچک‌تر و مستقل تقسیم کن. می‌خوام هر بخش فقط یک مسئولیت مشخص داشته باشه. مثلاً یک بخش مسئول راه‌اندازی کل برنامه باشه، یک بخش دیگه فقط مسئول نمایش محتوا و... .
-   **از ساختار پوشه‌ای که تعریف کردیم استفاده کن:** لطفاً این بخش‌های مختلف رو در فایل‌های جداگانه داخل پوشه `src/core/` قرار بده.
     - یک بخش فقط مسئول خوندن فایل باشه
     - یک بخش فقط مسئول تبدیل markdown به HTML باشه
     - یک بخش فقط مسئول نمایش محتوا روی صفحه باشه
-   **یک "مغز متفکر" بساز:** می‌خوام یک کلاس یا ماژول اصلی به نام `App` وجود داشته باشه که مثل مغز برنامه عمل کنه و مسئولیت هماهنگی بین بخش‌های مختلف رو به عهده بگیره.
-   **فایل ورودی ساده باشه:** فایل `src/index.js` باید خیلی ساده باشه و فقط وظیفه‌اش این باشه که این "مغز متفکر" رو روشن کنه و بگه "شروع کن!".

**نتیجه نهایی برای من نباید تغییری کنه:**
بعد از این بازسازی، وقتی من `index.html` رو باز می‌کنم، هنوز باید همون صفحه قبلی رو ببینم. این تغییر فقط یک بهینه‌سازی داخلی برای آینده پروژه است.

## پرامپت ۵
می‌خوام یک **منوی کناری (Sidebar)** به صفحه اضافه کنی تا کاربر بتونه بین صفحه‌های مختلف ویکی جابجا بشه.

**انتظارات من از این ویژگی:**

1. **محتوای منو از یک فایل خونده بشه:** 
   منو باید محتواش رو از یک فایل به اسم `sidebar.md` که در پوشه `config/` هست بخونه. 
   
   فرمت این فایل یک لیست مارک‌دان ساده:
   ```markdown
   - [صفحه اصلی](/)
   - [راهنمای نصب](/guide)
   - [درباره ما](/about)
   ```

2. **قابلیت جابجایی (Navigation):**
   - وقتی من روی هر لینک کلیک می‌کنم (مثلاً "راهنمای نصب")، محتوای `guide.md` باید نمایش داده بشه
   - آدرس مرورگر هم تغییر کنه (مثلاً به `#/guide`)
   - کاربر بتونه لینک رو کپی و اشتراک‌گذاری کنه
   - دکمه Back و Forward مرورگر کار کنن

3. **ساختار فایل‌ها:**
   فایل‌های markdown می‌تونن در هر جایی باشن. مثلاً:
   - `README.md` برای صفحه اصلی (/)
   - `guide.md` برای راهنما (/guide)  
   - `about.md` برای درباره ما (/about)
   - یا حتی در پوشه‌ها: `docs/intro.md` برای (/docs/intro)

**نکات مهم:**
- **مکان منو:** در سمت **راست** صفحه (چون فارسی است)
- **معماری:** به صورت ماژولار پیاده‌سازی بشه
- **ظاهر:** ساده و خوانا باشه، با فونت فارسی مناسب
- **مشخص شدن صفحه فعال (Active State):** وقتی من در یک صفحه هستم (مثلاً صفحه "درباره ما")، لینک مربوط به اون در منوی کناری باید به صورت "فعال" یا "هایلایت" شده نمایش داده بشه تا کاربر بدونه کجاست.
- **رفتار در موبایل:** در صفحه‌های کوچک (موبایل)، منوی کناری باید به صورت پیش‌فرض مخفی باشه و با کلیک روی یک دکمه (مثلاً آیکون همبرگری ☰) از کنار صفحه باز و بسته بشه.
- **قابلیت جمع‌شوندگی:** منوی کناری قابلیت جمع‌شوندگی داشته باشه.

## پرامپت ۶
می‌خوام منوی کناری از **ساختار تودرتو (Nested Menu)** پشتیبانی کنه.

**انتظارات من از این ویژگی:**
1.  **پشتیبانی از لیست‌های تودرتو در مارک‌دان:**
    منو باید بتونه ساختاری مثل این رو در فایل `sidebar.md` به درستی نمایش بده:

```markdown
- [صفحه اصلی](/)
- [راهنمای نصب](/guide)
- [درباره ما](/about)
- سندها
    - [مقدمه](/docs/intro)
    - [آغاز](/docs/start)
- [منابع](/resources/home)
    - [مقالات](/resources/articles)
    - [ویدیوها](/resources/videos)
```
در این مثال، "بخش سندها" یک عنوانه و لینک‌های "مقدمه" و "شروع به کار" زیرمجموعه اون هستن.

2.  **ظاهر و رفتار منوی تودرتو:**
    -   زیرمنوها باید به صورت پیش‌فرض **جمع‌شده (Collapsible)** باشن.
    -   وقتی من روی عنوان والد (مثل "بخش سندها") کلیک می‌کنم، زیرمنوی اون باید با یک انیمیشن ساده باز بشه. با کلیک دوباره، باید بسته بشه.
    - وقتی روی عنوان والدی مثل «منابع» کلیک می‌کنم باید محتوای اون و زیر منو نمایش داده بشه.
   - آیتم‌های زیرمجموعه (مثل "مقدمه" و "آغاز") باید با تورفتگی مناسب نمایش داده بشن.

3.  **حفظ حالت فعال (Active State):**
    -   وقتی من روی یک لینک زیرمجموعه (مثلاً "مقدمه") کلیک می‌کنم، اون لینک باید هایلایت بشه.
    -   **مهم:** والد اون لینک ("بخش سندها") هم باید در حالت "باز" باقی بمونه تا کاربر ساختار رو گم نکنه.

**نکات مهم معماری و پیاده‌سازی:**
-   این تغییر احتمالاً روی ماژول `sidebar.js` و فایل CSS (`main.css`) تاثیر می‌ذاره.
-   منطق پارس کردن مارک‌دان در `sidebar.js` باید هوشمندتر بشه تا لیست‌های تودرتو رو تشخیص بده و به ساختار HTML درستی تبدیل کنه.
-   باید کدهای جاوااسکریپت لازم برای باز و بسته کردن منوها و همچنین استایل‌های CSS جدید برای نمایش حالت‌های مختلف (باز، بسته، فعال) رو اضافه کنی.

**یادآوری:**
این قابلیت برای سازماندهی مستندات پیچیده حیاتیه. لطفاً مطمئن شو که هم از نظر ظاهری زیبا و کاربرپسند باشه و هم از نظر فنی تمیز پیاده‌سازی بشه.

## پرامپت ۷
در پنل کناری نویسه '‹' در سمت چپ قرار گرفته در حالیکه باید سمت راست متن باشه. دقت کن این پروژه باید با زبان فارسی سازگار باشه.

## پرامپت ۸
در پنل کناری تغییرات زیر را اعمال کن:
1. زیر منوها نسبت به منو اصلی تو رفتگی داشته باشه. (دقت کن سازگار با زبان فارسی باشه)
2. برای جمع‌شوندگی از آیکون همبرگری استفاده کن.
3. زمانی که نوار کنار جمع می‌شه باید به صورت کامل جمع بشه و چیزی دیده نشه غیر از آیکون همبرگری

## پرامپت ۹
متاسفانه تورفتگی زیرمنوها انجام نشده، دقت کن باید به سمت چپ تورفتگی باشه. و اینکه منوی همبرگری ثباته، که باعث شده در حالتیکی منو کناری بازه روی نام ویکی قرار بگیره.

## پرامپت ۱۰
می‌خوام ساختار فایل‌های استایل رو بهبود بدی تا پروژه تمیزتر و قابل نگهداری‌تر بشه.

1. ساختار پیشنهادی CSS:

```
src/styles/
├── main.css              # فایل اصلی که همه رو import می‌کنه
├── variables.css          # فقط CSS Variables
├── base.css               # Reset, Typography, Base styles
├── layout.css             # Layout اصلی (app-container, grid)
├── components/
│   ├── sidebar.css        # استایل sidebar
│   ├── content.css        # استایل بخش محتوا
│   ├── prose.css          # استایل markdown
│   └── messages.css       # loading, error messages
└── utilities/
    └── responsive.css     # Media queries
```

2. **بهینه‌سازی کد:**
   - کدهای تکراری رو حذف کن
   - از بهترین روش‌های CSS استفاده کن
   - کامنت‌های توضیحی اضافه کن (به فارسی برای راحتی کاربران ایرانی)

## پرامپت ۱۱
در بخش css تغییرات زیر را انجام بده

1. **جهت صفحه (RTL):**
   در فایل `base.css`، به تگ `html` خاصیت `dir="rtl"` رو اضافه کن:
   ```css
   html {
     direction: rtl;
   }
   ```
   و از `layout.css` خط `direction: rtl;` رو از `.app-container` حذف کن چون اونجا کاری نداره.


2. **sidebar در موبایل:**
   در فایل `layout.css`، استایل پیش‌فرض sidebar برای موبایل رو اضافه کن:
   ```css
   /* در موبایل، sidebar پیش‌فرض بسته است */
   @media (max-width: 767px) {
     #sidebar {
       transform: translateX(100%); /* بیرون از صفحه */
     }
     
     body:not(.sidebar-collapsed) #sidebar {
       transform: translateX(0); /* باز کردن sidebar */
     }
   }
   ```

3. **ارتفاع submenu:**
   در `components/sidebar.css`، به جای `max-height: 50vh`، از یک مقدار خیلی بزرگ استفاده کن تا همیشه کامل نمایش داده بشه:
   ```css
   .has-submenu.open > .submenu {
     max-height: 1000px; /* یا هر مقدار بزرگی */
   }
   ```

## پرامپت ۱۲
تغییرات زیر را اعمال کن:

1. **تناقض در رفتار sidebar:**
   الان رفتار sidebar در موبایل و دسکتاپ با هم تناقض داره و گیج‌کننده است. باید یک منطق ساده و واضح داشته باشیم:
   - **دسکتاپ:** sidebar به طور پیش‌فرض باز است. با کلیک روی دکمه جمع می‌شه.
   - **موبایل:** sidebar به طور پیش‌فرض بسته است. با کلیک روی دکمه hamburger باز می‌شه.

2. **منطق کلاس `sidebar-collapsed`:**
   این کلاس فقط برای **جمع کردن sidebar** استفاده بشه (در دسکتاپ و موبایل یکسان).
   - وقتی `sidebar-collapsed` هست → sidebar جمع/بسته است
   - وقتی `sidebar-collapsed` نیست → sidebar باز است

3. **تورفتگی زیرمنوها:**
   زیرمنوها باید نسبت به منوی اصلی تورفتگی داشته باشن. چون زبان فارسی راست به چپ است، تورفتگی باید به سمت **چپ** باشه (یعنی `padding-right` بیشتر).

4.  **استفاده از `class` به جای `id`:** لطفاً در تمام فایل‌های CSS، به جای استفاده از سلکتورهای `id` (مثل `#sidebar` و `#content`)، از سلکتورهای `class` (مثل `.sidebar` و `.content`) استفاده کن. فایل `index.html` رو هم متناسب با این تغییر، آپدیت کن. این کار باعث می‌شه کدهامون در آینده قابل استفاده مجدد باشن.

**نتیجه نهایی:**
بعد از این تغییرات، ما باید یک منوی کناری داشته باشیم که:
-   در همه دستگاه‌ها به طور پیش‌فرض بسته است.
-   با یک آیکون همبرگری باز و بسته می‌شه.
-   زیرمنوهایش تورفتگی دارن.
-   و کد CSS اون تمیزتر و حرفه‌ای‌تر شده.

## پرامپت ۱۳
زیرمنوها در پنل کناری همچنان در راستای منو اصلی هست. کد زیر در بخش console غیرفعاله:

```css
.submenu a {
  padding-right: 4.5rem;
}
```

## پرامپت ۱۴
تغییرات زیر را اعمال کن:
1. در حالت desktop منوی کناری به صورت پیش‌فرض باز باشه.
2. زمانی که منو بسته می‌شه بخش محتوا به سمت راست صفحه می‌ره و جای منوی کناری قرار می‌گیره، می‌خوام با بسته شدن منوی کنار اندازه نمایش محتوا بیشتر بشه نه اینکه جای منوی کناری رو بگیره.
3. آیکون همبرگری حس جداافتادگی از منو کناری می‌ده، می‌خوام به صورت یکپارچه دیده بشه.

## پرامپت ۱۵
من بهت نگفتم جای آیکون همبرگری را تغییر بدی، فقط از خواستم که با منو کناری یکپارچه بشه با تغییری که ایجاد کردی آیکون روی نام ویکی افتاده.

## پرامپت ۱۶
زمانی که منو بسته می‌شه بخش محتوا به سمت راست صفحه می‌ره و جای منوی کناری قرار می‌گیره، می‌خوام با بسته شدن منوی کنار اندازه نمایش محتوا بیشتر بشه نه اینکه جای منوی کناری رو بگیره.

## پرامپت ۱۷
می‌خوام در زمان ورود به ویکی به صورت پیش‌فرض نخستین صفحه که ریشه (/) است نمایش داده بشه.

## پرامپت ۱۸
ازت می‌خوام مشکل‌های زیر را بر طرف کنی:
1.  **دکمه منو در موبایل نمایش داده نمی‌شه:** الان در حالت موبایل، دکمه‌ای برای باز و بسته کردن منو وجود نداره و کاربر نمی‌تونه به منو دسترسی داشته باشه.
2.  **عدم پشتیبانی از منوی چند سطحی:** اگه بخوام یک منوی تودرتوی چند سطحی (مثلاً ۳ سطح یا بیشتر) بسازم، فقط سطح اول زیرمنو تورفتگی داره و بقیه سطوح به درستی نمایش داده نمی‌شن.

```markdown
- منو اصلی
  - زیرمنو سطح ۱
    - زیرمنو سطح ۲
      - زیرمنو سطح ۳
  - زیرمنو دیگه سطح ۱
```
- تورفتگی هر سطح باید **بیشتر** از سطح قبلی باشه

3.  **یک مشکل فنی کوچک:** در کد از `#sidebar-nav` به عنوان ID استفاده شده که بهتره به صورت Class (`.sidebar-nav`) باشه تا کد ما استانداردتر و قابل استفاده مجدد بشه.

## پرامپت ۱۹
تغییراتی که ایجاد کردی باعث شده زیرمنوها هیچ تورفتگی نداشته باشن.
